# Recommended Configuration for the MongoDB Solution

The MongoDB Solution has been configured to inherit down from the MongoDB > Settings node. However,
it is best practice to assign the host list and the Connection Profile at the data collection level,
the 0.Collection Job Group. Once these are assigned to the job group, it can be run directly or
scheduled.

Dependencies

- Query must be configured with list of target database clusters / instances

Some of the 0.Collection Job Group queries can be scoped to target specific databases/instances.
However, it is necessary to add the databases to the query first.

Targeted Host(s)

The 0.Collection Job Group must be set to run against a custom host list containing the MongoDB
database instances / clusters.

Connection Profile

The NoSQL Data Collector requires a specific set of permission. See the Permissions section for
necessary permissions. The account used can be either an Active Directory account or a SQL account.
Once the account has been provisioned, create a custom Connection Profile containing the credentials
for the targeted environment. See the
[NoSQL Custom Connection Profile & Host List](/docs/accessanalyzer/12.0/admin/datacollector/nosql/configurejob.md)
topic for additional information.

The Connection Profile should be assigned under the MongoDB > 0.Collection > Settings > Connection
node. It is set to Use the Default Profile, as configured at the global settings level. However,
since this may not be the Connection Profile with the necessary permissions for the assigned hosts,
click the radio button for the Select one of the following user defined profiles option and select
the appropriate Connection Profile drop-down menu.

See the [Connection](/docs/accessanalyzer/12.0/admin/settings/connection/overview.md) topic for additional
information.

Schedule Frequency

One of the most important decisions to make is how frequently to collect this data. The MongoDB Job
Group can be scheduled to run as desired depending on the types of auditing being conducted and the
scope of the target environment. The general recommendation is to schedule the solution to run
daily.

Run Order

The 0.Collection Jobs must be run first and in order. The other MongoDB Solution sub-job groups can
be run in any order, together or individually, after running the 0.Collection Job Group.

**_RECOMMENDED:_** Run the solution at the top level.

Workflow

1. Set a Connection Profile for the 0.Collection Job Group with the permissions listed in the
   Recommended Configurations section. See the
   [NoSQL Custom Connection Profile & Host List](/docs/accessanalyzer/12.0/admin/datacollector/nosql/configurejob.md)
   topic for additional information.
2. Set the Host list for the 0.Collection Job Group with the servers containing the target
   databases. Additionally, the database clusters / instances must be added to the Filter page in
   the query configuration. See the
   [NoSQL Custom Connection Profile & Host List](/docs/accessanalyzer/12.0/admin/datacollector/nosql/configurejob.md)
   topic for additional information.
3. (Optional) Configure the queries for the jobs in the 0.Collection Job Group
4. Schedule the 0.Collection Job Group to run daily or as desired

    **NOTE:** Running the 0.Collection Job Group is a prerequisite for the other job groups in the
    SQL solution

5. Review the reports generated by the 0.Collection Job Groupâ€™s jobs
