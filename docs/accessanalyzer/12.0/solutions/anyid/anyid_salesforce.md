# AnyID_Salesforce Job

The AnyID_Salesforce job collects Salesforce contact details including phone, address, email, and
date of birth. This job requires API access to Salesforce in order to collect this information. The
list of collected attributes can be adjusted as necessary.

![AnyID_Salesforce Job in the Jobs Tree](/img/product_docs/accessanalyzer/12.0/solutions/anyid/salesforcejoblocation.webp)

The AnyID_Salesforce job is located in the **Jobs** > **AnyID Connectors** job group.

## Prerequisites

The following credentials are required to run the AnyID_Salesforce job:

- (TASK - Local) – Stores the Consumer Key and Consumer Secret
- (TASK - Local) – Stores the Salesforce Account Username and password
- (TASK - Local) – Stores the URL for Salesforce site and Security Token for Salesforce site (for
  example, `https://company.my.salesforce.com`)

## Permissions

- API access to Salesforce

## Recommended Configurations for the AnyID_Salesforce Job

The following are recommended configurations for the AnyID_Salesforce job:

Targeted Host

Local Host

Connection Profile

Ensure that a connection profile is configured with the required credentials. See the
[Prerequisites](#prerequisites) topic for additional information.

History Retention

Default Retention Period. See the [History](/docs/accessanalyzer/12.0/admin/settings/history.md) topic for additional
information.

Multi-Console Support

Not supported

Schedule Frequency

Schedule the job as required.

Query Configuration

This job contains configurable queries. See the
[Configure the AnyID_Salesforce Query](#configure-the-anyid_salesforce-query) topic for additional
information.

Analysis Configuration

Run the solution with the default analysis configuration for best results.

Workflow

**Step 1 –** Set up a connection profile with the required credentials.

**Step 2 –** Configure the configurable query parameters for the job.

**Step 3 –** Run the job.

**Step 4 –** Review the report generated by the job.

## Queries for the AnyID_Salesforce Job

The AnyID_Salesforce job uses the PowerShell Data Collector for the query.

![Query for the AnyID_Salesforce Job](/img/product_docs/accessanalyzer/12.0/solutions/anyid/salesforcequeries.webp)

The query is:

- PS Salesforce Import – Imports Salesforce information for analysis. This query has configurable
  parameters. See the [Configure the AnyID_Salesforce Query](#configure-the-anyid_salesforce-query)
  topic for additional information.

### Configure the AnyID_Salesforce Query

Follow the steps to configure the AnyID_Salesforce query.

**Step 1 –** Navigate to the **AnyID Connectors** > **AnyID_Salesforce** > **Configure** node and
select **Queries**.

**Step 2 –** In the Query Selection view, select the PS Salesforce Import query and click **Query
Properties**. The Query Properties window opens.

**Step 3 –** Select the **Data Source** tab, and click **Configure**. The PowerShell Data Collector
Wizard opens.

![Edit Query Page](/img/product_docs/accessanalyzer/12.0/solutions/anyid/salesforcequeryeditquery.webp)

**Step 4 –** Navigate to the Edit Query page. Click the **Parameters** tab on the right-hand side of
the page to expand the Parameters window. See the
[PowerShell: Edit Query](/docs/accessanalyzer/12.0/admin/datacollector/powershell/editquery.md) topic for additional
information. Configure the following attributes as needed:

- $SAHOSTNAME – Created during execution. This parameter cannot be modified.
- $JobCredential – Created during execution. This parameter cannot be modified.
- $JobCredentials – Created during execution. This parameter cannot be modified.
- $Attributes – The list of attributes that will be scanned for during sensitive data scanning

    - An attribute in the Attributes list will not be considered a match (in reporting and AIC)
      unless an attribute in the RequiredAttributes list is also found in the same file

- $RequiredAttributes – The list of attributes that need to be found in the document in order to
  trigger a match

    - An attribute in the Attributes list will not be considered a match (in reporting and AIC)
      unless an attribute in the RequiredAttributes list is also found in the same file

- $ID – Column which uniquely identifies each subject
- $SubjectType – A string which indicates the type of subjects being imported
- $SubjectName – A string which indicates the name of the subjects being imported
- $debugMode – When set to true, stores unhashed attribute values for troubleshooting purposes

**Step 5 –** Click **Next**. Continue to the **Sample server** page and click **Finish** to save
changes. Click **Cancel** to exit the wizard without saving changes.

The query is now ready to run.

## Analysis Tasks for the AnyID_Salesforce Job

Navigate to the **Jobs** > **AnyID Connectors** > **AnyID_Salesforce** > **Configure** node and
select **Analysis** to view the analysis tasks.

**CAUTION:** Do not modify or deselect the selected analysis tasks. The analysis tasks are
preconfigured for this job.

![Analysis Tasks for the AnyID_Salesforce Job](/img/product_docs/accessanalyzer/12.0/solutions/anyid/salesforceanalyses.webp)

The default analysis tasks are:

- Create Subject Profile Types – Creates subject profile types
- Create Subject Profile Imports Procedure – Creates subject profile imports procedure
- Merge into Subject Profile schema – Merges into subject profile schema
- Calculate completion details – Calculates attribute completion for Salesforce contacts

In addition to the tables created by the analysis tasks, the AnyID_Salesforce job produces the
following preconfigured report:

| Report              | Description                                                                                                 | Default Tags | Report Elements                                                                                                                                                                                                                                                    |
| ------------------- | ----------------------------------------------------------------------------------------------------------- | ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Salesforce Contacts | This report highlights Salesforce Contacts and summarizes attribute completion by contact and by attribute. | None         | This report is comprised of four elements: - Table – Contains information on Salesforce contacts - Bar Chart – Provides information on contact types - Table – Contains information on the attributes completion - Table – Contains information on subject details |
